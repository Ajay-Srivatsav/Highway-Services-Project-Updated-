<!doctype html>
<html>
  <head>
    <title>LOGIN PAGE</title>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="description" content="An image crossfade animation done with CSS3">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="login_css/slidingbackground.css">
    <link rel="stylesheet" href="login_css/login1.css">
    <link rel="stylesheet" href="cssfile.css">
    <link rel="stylesheet" href="dropdown.css">
	  <link rel = "icon" href = "img\HSicon6.jpg" type = "image/x-icon">
    <script src="https://www.gstatic.com/firebasejs/8.4.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.4.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.4.1/firebase-firestore.js"></script>
</head>
<body style="height: 2000px;">
  <div class="crossfade">
    <figure></figure>
    <figure></figure>
    <figure></figure>
    <figure></figure>
  </div>
  <header>
		<div id="logo">
			<a href="home.html">HIGHWAY<span id="logo-s">SERVICES</span></a>
		</div>
		<span class="sign"><a href="#">CONTACT US</a></span>
		<span class="sign"><a href="aboutus.html">ABOUT US</a></span>
		<span class="sign"><a  href="register.html">SIGN UP</a></span>
		<span class="sign"><a href="login.html">SIGN IN</a></span>
		<span class="sign"><a href="home.html">HOME</a></span>
        <span class="sign">
			<div class="dropdown">
				<a href="readmore.html#SERVICES">
					<button class="dropbtn">SERVICES</button></a>
					<div class="dropdown-content">
						<a href="readmore.html#SERVICES">Towing</a>
						<a href="readmore.html#SERVICES">Jump Start</a>
						<a href="readmore.html#SERVICES">Flat Tyre</a>
						<a href="readmore.html#SERVICES">Lockout </a>
						<a href="readmore.html#SERVICES">Fuel Delivery</a>
					</div>
			  </div>
		</span>
	</header>

<div class="center">
   
 
  <h1 style="font-family: candara;color:darkslateblue">Login</h1>
  <div class="form">
    <div class="txt_field">
      <input type="email" id="mail" required>
      <span></span>
      <label>Email</label>
    </div>
    <div class="txt_field">
      <input type="password" id="pass" required>
      <span></span>
      <label>Password</label>
    </div>
    <div class="pass">Forgot Password?</div>
    <input type="submit" onclick="login()" value="Login">
    <div class="signup_link">
      Not a member? <a href="register.html">Signup</a>
    </div>
  </div>
</div>
<script src="jsfile.js"></script>
<script>
    function login()
    {
      var firebaseConfig = {
        apiKey: "AIzaSyBFT-2w7mDPUkoqtSVDjfc3GjOydDSTDsc",
        authDomain: "highwayservices-3a4bb.firebaseapp.com",
        projectId: "highwayservices-3a4bb",
        storageBucket: "highwayservices-3a4bb.appspot.com",
        messagingSenderId: "89877502779",
        appId: "1:89877502779:web:afcc7a9f1df6efea00f51e",
        measurementId: "G-1V9ZPXXVGZ"
      };

			firebase.initializeApp(firebaseConfig);
			var auth=firebase.auth();
			var firestore=firebase.firestore();
      
      mail=document.getElementById("mail").value;
      pass=document.getElementById("pass").value;

      auth.signInWithEmailAndPassword(mail,pass).then(cred=>{
        firestore.collection('mechanic').doc(mail).get()
        .then((doc) => {
            if (doc.exists)
            {
              name=doc.data().Name;
              alert("Welcome "+name);
              window.open("./home.html","_self");
            }
            else
            {
              alert("No user");
            }
        })
        .catch((error) => {
            console.log(error);
        });
      })
      .catch((error)=>{
          alert(error);
      });
    }
</script>
</body>
</html>


